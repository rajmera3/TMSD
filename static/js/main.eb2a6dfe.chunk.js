(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t,a){e.exports=a(272)},20:function(e,t,a){e.exports=a.p+"static/media/icon-package.c87221ed.svg"},268:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),i=a(7),o=a(8),l=a(10),u=a(9),m=a(11),d=a(277),h=a(276),p=a(96),g=a(129),f=a.n(g),v=a(15),E=a.n(v),y=a(31),b=a(12),w=a.n(b);w.a.initializeApp({apiKey:"AIzaSyDiY0fyje5FeDMqbsdEhAkHM52GHHPGM4o",authDomain:"tmsd-577fd.firebaseapp.com",databaseURL:"https://tmsd-577fd.firebaseio.com",storageBucket:"tmsd-577fd.appspot.com",projectId:"tmsd-577fd"});var _=function(){function e(){Object(i.a)(this,e),this.collection=w.a.firestore().collection("data")}return Object(o.a)(e,[{key:"changeCollection",value:function(e){this.collection=w.a.firestore().collection(e)}},{key:"getQueryMatches",value:function(){var e=Object(y.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t=t.toLowerCase(),e.next=4,this.collection.where("related_terms","array-contains",t).get();case 4:return e.sent.forEach(function(e){var n=e.data();n.name.toLowerCase()==t?a.unshift(n):a.push(n)}),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTerms",value:function(){var e=Object(y.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.get();case 2:return t=e.sent,e.abrupt("return",t.docs.map(function(e){return e.id}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createSnippet",value:function(e,t){for(var a,n=e,r=new RegExp(t,"gi");null!==(a=r.exec(e));)n=n.replace(a[0],"<em>"+a[0]+"</em>");return n}},{key:"search",value:function(e,t,a){var n=this;return this.getQueryMatches(e).then(function(r){var c=[];return r.forEach(function(t){c.push({data:{name:{raw:t.name,snippet:n.createSnippet(t.name,e)},description:{snippet:n.createSnippet(t.description,e)}}})}),{info:{meta:{page:{current:t,size:a,total_pages:Math.ceil(r.length/a),total_results:r.length}}},results:c}})}}]),e}(),S=function(){return new _},T=S();p.b.addAdapter(f.a);var N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={title:" "},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=decodeURI(window.location.href).split(/"/)[1].toLocaleLowerCase();console.log(t);T.collection.doc(t).get().then(function(t){t.exists?e.setState({name:t.data().name,dates:t.data().dates,description:t.data().description,first_occurance:t.data().first_occurance}):console.log("No such document!")}).catch(function(e){console.log("Error getting document",e)})}},{key:"render",value:function(){return console.log(this.state.dates),r.a.createElement("div",null,r.a.createElement("div",{style:x.header},r.a.createElement("h1",{style:x.headerText,className:"term-title"}," ",this.state.name," "),r.a.createElement("hr",null)),r.a.createElement("div",{style:x.graph,className:"graph"},r.a.createElement(p.a,{height:"42vh",data:this.state.dates,colors:["#3899E8","#F55452","9831FF"]})),r.a.createElement("div",{style:x.definition,className:"graph"},r.a.createElement("p",{style:x.defText}," ",r.a.createElement("strong",null,"Definition:")," ",this.state.description),r.a.createElement("p",{style:x.defText}," ",r.a.createElement("strong",null,"First Occurance:")," ",this.state.first_occurance),r.a.createElement("p",{style:x.defText}," ",r.a.createElement("strong",null,"Data Sources:")," Pubmed for Academia")))}}]),t}(r.a.Component),x={header:{width:"75vw",margin:"auto",marginTop:"2%",textAlign:"center"},headerText:{textAlign:"center"},graph:{width:"90vw",height:"100%",margin:"auto",marginTop:"40px"},definition:{width:"60vw",height:"100%",margin:"auto",marginTop:"40px",marginBottom:"40px"},defText:{textAlign:"left",color:"black"}},O=N,k=a(130),j=a(275),A=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return this.props.children}}]),t}(n.Component),C=Object(j.a)(A),D=a(139);a(243);function q(e,t){return Math.min(100*t,e)}function I(e){var t=e.currentPage,a=e.pageSize,n=(e.totalPages,e.totalResults),c=e.onPage;return r.a.createElement("div",{className:"container"},r.a.createElement(D.a,{pageSize:a,current:t,total:q(n,a),onChange:c}))}function M(e){var t=e.value;e.children;return t?Array.isArray(t)&&!t.length?null:r.a.createElement("p",{className:"result__description",dangerouslySetInnerHTML:P(t)}):null}function P(e){return{__html:e}}function L(e,t){return(e.data[t]||{}).raw}function R(e,t){return(e.data[t]||{}).snippet}function Q(e){var t=e.results;e.queryState,e.trackClick;return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{className:"result",key:L(e,"name")},r.a.createElement("div",{className:"result__header"},r.a.createElement("a",{className:"result__title",href:"/TMSD/#/v="+JSON.stringify(L(e,"name").toLowerCase()),rel:"noopener noreferrer",dangerouslySetInnerHTML:P(R(e,"name"))})),r.a.createElement("div",{className:"result__body"},r.a.createElement(M,{value:R(e,"description")})))}))}var B=a(133),F=a(68),z=a(134),U=a(49),H=a.n(U),W=S(),G=["dependencies","license","keywords"];var J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={facets:{},filters:{},pageState:{currentPage:0,pageSize:0,totalPages:0,totalResults:0},query:"",requestId:"",results:[]},a.updateQuery=function(e){a.props.history.push("?"+H.a.stringify({q:e}))},a.updatePage=function(e){a.props.history.push("?"+H.a.stringify(Object(B.a)({},a.getQueryState(),{page:e})))},a.updateFromQueryState=function(){var e,t=a.getQueryState(),n=t.q,r=t.page,c=(e=a.getQueryState(),G.reduce(function(t,a){var n=e[a];return n?t.concat(Object(F.a)({},a,n)):t},[]));n=n||"",r=parseInt(r,10),r=isNaN(r)?1:r,a.updateResults({query:n,page:parseInt(r,10),filters:c})},a.updateResults=Object(z.debounce)(function(e){var t=e.query,n=e.page,r=void 0===n?1:n;e.filters;W.search(t,r,10).then(function(e){a.setState({pageState:{currentPage:e.info.meta.page.current,pageSize:e.info.meta.page.size,totalPages:e.info.meta.page.total_pages,totalResults:e.info.meta.page.total_results},query:t,results:e.results})},function(e){console.log("error: ".concat(e))})},200),a.curriedTrackClick=function(e,t){return function(e){}},a.getQueryState=function(){return H.a.parse(a.props.location.search)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateFromQueryState()}},{key:"componentDidUpdate",value:function(e){this.props.location.search!==e.location.search&&this.updateFromQueryState()}},{key:"render",value:function(){var e=this.props.children,t=this.state,a=t.facets,n=t.filters,r=t.pageState,c=t.query,s=t.requestId,i=t.results,o=c?"active-search":"";return e({query:this.getQueryState().q,queryState:this.getQueryState(),queryClass:o,searchActions:{trackClick:this.curriedTrackClick(c,s),updatePage:this.updatePage,updateQuery:this.updateQuery},searchResults:{facets:a,filters:n,pageState:r,query:c,requestId:s,results:i}})}}]),t}(n.Component);function K(e){var t=e.currentPage,a=e.pageSize,n=e.totalResults,c=0===n?0:(t-1)*a+1,s=n<=a?n:c+a-1;return r.a.createElement("div",{className:"results__result-count"},"Showing"," ",r.a.createElement("strong",null,c," - ",s)," ","of ",r.a.createElement("strong",null,n))}var V=a(20),Y=a.n(V),$=S(),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={title:" ",isSuccessful:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"componentWillMount",value:function(){}},{key:"requestNewTerm",value:function(){var e=Object(y.a)(E.a.mark(function e(){var t,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($.changeCollection("requestedTerms"),t=(t=document.getElementById("requestedTerm").value).toLowerCase(),a=!1,""!=t){e.next=8;break}alert("Please provide a term"),e.next=12;break;case 8:return e.next=10,$.collection.doc(t).set({}).then(function(){console.log("Document successfully written!"),a=!0,console.log(a)}).catch(function(e){console.error("Error writing document: ",e),a=!1});case 10:console.log(a),this.setState({isSuccessful:a});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("a",{className:"btn btn-ghostLogin",href:"/TMSD/#/adminLogin",style:Z.adminButton}," ","Admin Login"," "),r.a.createElement("div",{align:"center"},r.a.createElement(C,null,r.a.createElement(h.a,null,function(t){var a=t.location,n=t.history;return r.a.createElement(J,{location:a,history:n},function(t){var a=t.query,n=t.queryState,c=t.queryClass,s=t.searchActions,i=t.searchResults;return r.a.createElement("div",null,r.a.createElement("div",{className:"tmsd live-filtering ".concat(c)},r.a.createElement("div",{className:"tmsd__content"},r.a.createElement("div",{className:"tmsd__header"},r.a.createElement("div",{className:"tmsd__headings"},r.a.createElement("div",{className:"tmsd__icon-wrap"},r.a.createElement("img",{src:Y.a,alt:"Dinosaur Icon",className:"tmsd__icon"})),r.a.createElement("h1",{className:"tmsd__title"},"Time Machine Space Dinosaur")),r.a.createElement("div",{className:"tmsd__input-wrapper"},r.a.createElement("input",{className:"tmsd__text-input",placeholder:"Search science fiction term or author\u2026",value:a,onChange:function(e){return s.updateQuery(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Search",className:"button tmsd__submit"}))),r.a.createElement("div",{className:"tmsd__body"},r.a.createElement("div",{className:"search-results"},r.a.createElement("div",{className:"results"},r.a.createElement("div",{className:"results__header"},r.a.createElement(K,i.pageState)),r.a.createElement("div",{className:"results__body"},r.a.createElement(Q,{results:i.results,queryState:n,trackClick:s.trackClick})),r.a.createElement("div",{className:"results__footer"},r.a.createElement(I,Object.assign({},i.pageState,{onPage:s.updatePage})))))))),r.a.createElement(k.a,{position:"top right",trigger:r.a.createElement("button",{type:"button",className:"btn btn-ghostLogin"}," ","Request New Term"," "),modal:!0},function(t){return r.a.createElement("div",{className:"modal",align:"center"},r.a.createElement("a",{className:"close",onClick:t},"\xd7"),r.a.createElement("div",{className:"header"}," Enter Term "),r.a.createElement("form",null,r.a.createElement("input",{id:"requestedTerm",name:"requestedTerm",type:"text",className:"inputForm"})),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"btn btn-ghost",type:"button",onClick:function(){e.requestNewTerm(),t()}}," ","Confirm Request"," "),r.a.createElement("button",{type:"button",className:"btn btn-full",onClick:function(){console.log("modal closed "),t()}},"Close")))}),r.a.createElement("div",{className:"site-background"},r.a.createElement("div",null),r.a.createElement("a",{href:"/TMSD/#/directory",className:"directory"}," ",r.a.createElement("p",null," Directory of Terms "))))})}))))}}]),t}(n.Component),Z={header:{width:"75vw",margin:"auto",marginTop:"20px",textAlign:"center"},headerText:{textAlign:"center"},graph:{width:"90vw",height:"100%",margin:"auto",marginTop:"40px"},definition:{width:"60vw",height:"100%",margin:"auto",marginTop:"40px",marginBottom:"40px"},defText:{textAlign:"left",color:"black"},adminButton:{float:"right",margin:"10px"}},ee=X,te=S(),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).TermList=function(){var e=a.state.allTerms.map(function(e){return r.a.createElement("li",null,r.a.createElement("a",{href:'/TMSD/#/v="'+e+'"'},e))});return r.a.createElement("ul",null,e)},a.state={allTerms:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;te.getAllTerms().then(function(t){e.setState({allTerms:t})})}},{key:"render",value:function(){return console.log(this.state.allTerms),r.a.createElement("div",{align:"center",style:ne.divStyle},r.a.createElement("div",{className:"tmsd__headings"},r.a.createElement("div",{className:"tmsd__icon-wrap"},r.a.createElement("img",{src:Y.a,alt:"Dinosaur Icon",className:"tmsd__icon"})),r.a.createElement("h1",{className:"tmsd__title"},"Time Machine Space Dinosaur"),r.a.createElement("h4",{className:"tmsd__title",style:{textAlign:"center"}},"Directory of Terms"),r.a.createElement(this.TermList,null)))}}]),t}(n.Component),ne={header:{width:"75vw",margin:"auto",marginTop:"20px",textAlign:"center"},headerText:{textAlign:"center"},graph:{width:"90vw",height:"100%",margin:"auto",marginTop:"40px"},definition:{width:"60vw",height:"100%",margin:"auto",marginTop:"40px",marginBottom:"40px"},defText:{textAlign:"left",color:"black"}},re=a(141),ce=[],se=S(),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).isUserLoggedIn=Object(y.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.checkLoginStatus();case 3:t=e.sent,console.log("try | react side: ",t),t&&a.setState({user:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("catch | error: ",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),a.updateOptions=function(){se.changeCollection("requestedTerms");var e=se.getAllTerms();console.log(e),e.then(function(e){for(var t=[],n=0;n<e.length;n++){var r={value:e[n],label:e[n]};t.push(r)}a.setState({options:t}),console.log(e),console.log(ce)})},a.handleChange=function(e){a.setState({selectedOption:e}),console.log("Option selected:",e),console.log(a.state.selectedOption)},a.deleteRequests=function(e){if(se.changeCollection("requestedTerms"),console.log(a.state),e=a.state.selectedOption){for(var t=0;t<e.length;t++)se.collection.doc(e[t].value).delete().then(function(){console.log("Document successfully deleted!")}).catch(function(e){console.error("Error removing document: ",e)});a.updateOptions(),a.setState({selectedOption:null})}},a.state={options:ce,isLoggedIn:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.updateOptions(),w.a.auth().onAuthStateChanged(function(e){e&&this.setState({isLoggedIn:!0})}.bind(this)),console.log("First check "+this.state.user)}},{key:"checkLoginStatus",value:function(){return new Promise(function(e,t){w.a.auth().onAuthStateChanged(function(t){e(t)},t("api failed"))})}},{key:"logout",value:function(){w.a.auth().signOut()}},{key:"render",value:function(){this.state.selectedOption;return console.log("User "+this.state.user),this.state.isLoggedIn?r.a.createElement("div",null,r.a.createElement("a",{className:"btn btn-ghostLogin",href:"/TMSD/#/",style:oe.adminButton,onClick:this.logout}," ","Logout"," "),r.a.createElement("div",{style:oe.header},r.a.createElement("h1",{style:oe.headerText,className:"term-title"},"Admin Dashboard"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"admin-dashboard"},r.a.createElement("div",{className:"pending-requests graph",style:oe.requests},r.a.createElement("h3",null,"Pending Requests"),r.a.createElement("p",null,"Select requested terms to add or delete to the database"),r.a.createElement(re.a,{value:this.state.selectedOption,onChange:this.handleChange,options:this.state.options,isMulti:!0,closeMenuOnSelect:!1}),r.a.createElement("a",{className:"btn btn-ghost"}," Add to Database "),r.a.createElement("a",{className:"btn btn-full",onClick:this.deleteRequests}," ","Delete Requests"," ")),r.a.createElement("div",{className:"stats"}),r.a.createElement("div",{className:"actions"}))):r.a.createElement("div",{align:"center",style:oe.divStyle},r.a.createElement("div",{className:"tmsd__headings"},r.a.createElement("div",{className:"tmsd__icon-wrap"},r.a.createElement("img",{src:Y.a,alt:"Dinosaur Icon",className:"tmsd__icon"})),r.a.createElement("h1",{className:"tmsd__title"},"Time Machine Space Dinosaur")),r.a.createElement("p",null,"You are not logged in. Please use the buttons below to redirect."),r.a.createElement("a",{className:"btn btn-ghost",href:"/TMSD/#"},"Redirect to TMSD Home"),r.a.createElement("a",{className:"btn btn-ghost",href:"/TMSD/#/adminLogin"},"Redirect to TMSD Admin Login"))}}]),t}(r.a.Component),oe={header:{width:"75vw",margin:"auto",marginTop:"20px",textAlign:"center"},headerText:{textAlign:"center"},requests:{width:"90vw",height:"100%",margin:"auto",marginTop:"40px"},definition:{width:"60vw",height:"100%",margin:"auto",marginTop:"40px",marginBottom:"40px"},defText:{textAlign:"left",color:"black"},divStyle:{margin:"auto",marginTop:"10%",height:"100%"},adminButton:{float:"right",margin:"10px",marginTop:"-20px"}},le=ie,ue=a(138),me=a.n(ue),de=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isSignedIn:!1},a.uiConfig={signInFlow:"popup",signInOptions:[w.a.auth.GoogleAuthProvider.PROVIDER_ID,w.a.auth.EmailAuthProvider.PROVIDER_ID,w.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD],signInSuccessUrl:"/TMSD/#/admin",callbacks:{signInSuccessWithAuthResult:function(){return!0}}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.unregisterAuthObserver=w.a.auth().onAuthStateChanged(function(t){return e.setState({isSignedIn:!!t})})}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return this.state.isSignedIn?(window.location.href="/TMSD/#/admin",r.a.createElement("div",{align:"center",style:he.divStyle},r.a.createElement("div",{className:"tmsd__headings"},r.a.createElement("div",{className:"tmsd__icon-wrap"},r.a.createElement("img",{src:Y.a,alt:"Dinosaur Icon",className:"tmsd__icon"})),r.a.createElement("h1",{className:"tmsd__title"},"Time Machine Space Dinosaur")),r.a.createElement("p",null,"Sign in successful! Redirecting..."))):r.a.createElement("div",{align:"center",style:he.divStyle},r.a.createElement("div",{className:"tmsd__headings"},r.a.createElement("div",{className:"tmsd__icon-wrap"},r.a.createElement("img",{src:Y.a,alt:"Dinosaur Icon",className:"tmsd__icon"})),r.a.createElement("h1",{className:"tmsd__title"},"Time Machine Space Dinosaur")),r.a.createElement("p",null,"Please sign-in:"),r.a.createElement(me.a,{uiConfig:this.uiConfig,firebaseAuth:w.a.auth()}))}}]),t}(r.a.Component),he={header:{width:"75vw",margin:"auto",marginTop:"20px",textAlign:"center"},headerText:{textAlign:"center"},requests:{width:"90vw",height:"100%",margin:"auto",marginTop:"40px"},definition:{width:"60vw",height:"100%",margin:"auto",marginTop:"40px",marginBottom:"40px"},defText:{textAlign:"left",color:"black"},divStyle:{margin:"auto",marginTop:"10%",height:"100%"}},pe=de,ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={redirect:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{basename:"/TMSD"},r.a.createElement("div",null,r.a.createElement(h.a,{exact:!0,path:"/",component:ee}),r.a.createElement(h.a,{path:"/v=:id",component:O}),r.a.createElement(h.a,{path:"/directory",component:ae}),r.a.createElement(h.a,{path:"/admin",component:le}),r.a.createElement(h.a,{path:"/adminlogin",component:pe})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(268);s.a.render(r.a.createElement(ge,null),document.getElementById("app-container"))}},[[142,2,1]]]);
//# sourceMappingURL=main.eb2a6dfe.chunk.js.map